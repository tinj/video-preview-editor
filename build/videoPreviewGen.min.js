!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.VideoPreviewGen=t():e.VideoPreviewGen=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function r(e,t){_.defaults(this,e,h),this.doneCallback=t}function i(){return this.initialLargeArrayOfImages&&this.initialLargeArrayOfImages.length}function o(){return this.newArrayForSelection&&this.newArrayForSelection.length}function a(e){var t=n(4);return _.map(e,function(e,n){return t({url:e,i:n})}).join("")}function l(e,t){e.find("ul").html(a(t))}function s(e){var t=$(e.target);this.$scroller2.show();var n=t.parent();n.addClass("selected_frame"),this.clickedImgUrl=t.attr("src"),console.log(this.clickedImgUrl),this.$initialLi&&this.$initialLi.removeClass("selected_frame"),this.$initialLi=n,this.showSecondScrollerandCallNeighboringImages()}function c(e){var t=$(e.target),n=t.parent();console.log(n),this.replacementSelectedFrameId=n.attr("id"),n.addClass("replacement_frame");var r=t.attr("src");this.$replacementLi&&(this.$replacementLi.removeClass("replacement_frame"),this.$replacementImgUrl===r&&this.updateOriginal()),this.$replacementLi=n,this.$replacementImgUrl=r}function c(e){var t=$(e.target),n=t.parent();console.log(n),this.replacementSelectedFrameId=n.attr("id"),n.addClass("replacement_frame");var r=t.attr("src");this.$replacementLi&&(this.$replacementLi.removeClass("replacement_frame"),this.$replacementImgUrl===r&&this.updateOriginal()),this.$replacementLi=n,this.$replacementImgUrl=r}function d(e){$(e.target);this.$secondModal.modal("hide"),this.$firstModal.modal("show"),this.firstSubmitButton()}n(1);var h={numberOfFrames:20,el:"#thumbnails"};r.prototype.render=function(){console.log("rendering modal"),$(this.el).append(n(3))},r.prototype.initialize=function(){this.render(),this.initializeScrollers(),this._defineCachedJqueryVars(),i.call(this)?this.launchFunctionsforSecondModal():this.showFirstModal()},r.prototype.showFirstModal=function(){this.$firstModal.modal("show"),this.firstSubmitButton()},r.prototype.showSecondModal=function(){this.$secondModal.modal("show"),this.updateHtmlListInFirstScroller()},r.prototype.launchFunctionsforSecondModal=function(){o.call(this)||this.newFramesetFromWholeSet(),this.showSecondModal()},r.prototype.setImages=function(e){e&&e.initialLargeArrayOfImages&&(console.log("initialLargeArrayOfImages"),this.initialLargeArrayOfImages=e.initialLargeArrayOfImages,e.selectedImages&&(this.newArrayForSelection=e.selectedImages))},r.prototype._defineCachedJqueryVars=function(){console.log("vars"),this.$secondModal=$("#secondModal"),this.$firstModal=$("#firstModal"),this.$secondModal=$("#secondModal"),this.$submitButton=$("#submitButton"),this.$randomButton=$("#random"),this.$showFirstPage=$("#showFirstPage"),this.$scroller=$("#scroller"),this.$scroller2=$("#scroller2"),this.$imagesInScroller=$("#scroller2 li > img"),this.$showFirstPage=$("#showFirstPage")},r.prototype.initializeScrollers=function(){var e={scrollX:!0,scrollY:!1,mouseWheel:!0,interactiveScrollbars:!1,click:!0};this.myScroll1=new IScroll("#wrapper",e),this.myScroll2=new IScroll("#wrapper2",e)},r.prototype.updateHtmlListInFirstScroller=function(){console.log("called"),this.newArrayForSelection||this.newFramesetFromWholeSet(),l(this.$scroller,this.newArrayForSelection),this.getWidth(),this.clickFirstImageArrayToGetImage();var e=this;setTimeout(function(){e.myScroll1.refresh()},200)},r.prototype.updateHtmlListInSecondScroller=function(){l(this.$scroller2,this.arrayOfImagesToSelectFrom);var e=this;setTimeout(function(){e.myScroll2.refresh()},200)},r.prototype.determineSizeOfNewArrayForSelection=function(){return this.initialLargeArrayOfImages.length/this.numberOfFrames},r.prototype.newFramesetFromWholeSet=function(){console.log("new frameset");var e=this.determineSizeOfNewArrayForSelection();this.newArrayForSelection=_.map(_.groupBy(this.initialLargeArrayOfImages,function(t,n){return Math.floor(n/e)}),_.first)},r.prototype.getWidth=function(){console.log("Get width");var e=this.newArrayForSelection.length,t=200*e+"px";$("#scroller").css({width:t})},r.prototype.clickFirstImageArrayToGetImage=function(){console.log("clickFirstImageArrayToGetImage function"),this.$scroller.find("img").click(s.bind(this))},r.prototype.getImageIndexFromUrl=function(e){return _.indexOf(this.newArrayForSelection,e,this)},r.prototype.showSecondScrollerandCallNeighboringImages=function(){this.$scroller2.show(),this.getNeighboringImages(this.clickedImgUrl,7)},r.prototype.getNeighboringImages=function(e,t){console.log("getNeighboringImages function");var n=this.getImageIndexFromUrl(e);console.log(n);var r=Math.ceil(t/2),i=Math.max(n-r,0),o=Math.min(n+r,this.newArrayForSelection.length-1);0===i&&(o=t),o===this.newArrayForSelection.length-1&&(i=o-t),this.arrayOfImagesToSelectFrom=this.newArrayForSelection.slice(i,o),this.updateHtmlListInSecondScroller(),this.selectReplacementImage()},r.prototype.selectReplacementImage=function(){console.log("selectReplacementImage function"),this.$scroller2.find("li > img").click(c.bind(this))},r.prototype.generateNewArrayOfImagesFromModifiedScroller=function(){var e=[];return $("#scroller ul li img").each(function(){e.push($(this).attr("src"))}),this.newArrayForSelection=e,this.newArrayForSelection},r.prototype.updateOriginal=function(){this.$initialLi.find("img").attr("src",this.$replacementImgUrl),this.replacementImgUrl=void 0,this.$replacementLi=void 0,this.$scroller2.hide(),this.generateNewArrayOfImagesFromModifiedScroller()},r.prototype.serialize=function(){var e=_.clone(this.newArrayForSelection);return{images:e}},r.prototype.onDone=function(){_.isFunction(this.doneCallback)&&this.doneCallback(this.serialize()),this.cleanUp()},r.prototype.cleanUp=function(){this.$secondModal.modal("hide")},r.prototype.selectReplacementImage=function(){console.log("selectReplacementImage function"),this.$scroller2.find("li > img").click(c.bind(this))},r.prototype.navToFirst=function(){this.showFirstPage.click(d.bind(this))},e.exports=r},function(e,t,n){n(5)(n(2))},function(e){e.exports="button {\n  width: 90px;\n  height: 20px;\n  color: red;\n}\n.modal-dialog {\n  width: 900px;\n}\n.form-group {\n  width: 200px;\n}\n.selected_frame {\n  opacity: .5;\n}\n.replacement_frame {\n  opacity: .70;\n}\n#container {\n  width: 500px;\n  height: 300px;\n  background-color: red;\n  border: 1px solid #000;\n  background-position: center center;\n  background-repeat: no-repeat;\n}\n#img {\n  width: 500px;\n  height: 300px;\n}\n* {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\nhtml {\n  -ms-touch-action: none;\n}\nbody,\nul,\nli {\n  padding: 0;\n  margin: 0;\n  border: 0;\n}\nbody {\n  font-size: 12px;\n  font-family: ubuntu, helvetica, arial;\n}\n.wrapper {\n  z-index: 1;\n  width: 100%;\n  overflow: hidden;\n}\n#scroller {\n  width: 5000px;\n  height: 200px;\n}\n#scroller2 {\n  width: 1600px;\n  height: 200px;\n}\n.scroller {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /*ÃŸbackground-color: #a00;*/\n  -webkit-transform: translateZ(0);\n  -moz-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  -o-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-text-size-adjust: none;\n  -moz-text-size-adjust: none;\n  -ms-text-size-adjust: none;\n  -o-text-size-adjust: none;\n  text-size-adjust: none;\n}\n.scroller ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  width: 100%;\n  height: 50%;\n  text-align: center;\n}\n.scroller li {\n  display: block;\n  float: left;\n  width: 200px;\n  height: 100px;\n  border-right: 1px solid #ccc;\n  background-color: #fafafa;\n  font-size: 14px;\n}\n"},function(e,t,n){n(6);e.exports=function(){var e=[];return e.push('<div id="secondModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="false" class="modal fade container col-md-12"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" data-dismiss="modal" aria-hidden="true" class="close"></button><h4 id="myModalLabel" class="modal-title">Modal title</h4></div><div class="modal-body"><div id="wrapper" class="wrapper"><div id="scroller" class="scroller"><ul id="frames"></ul></div></div><div id="wrapper2" class="wrapper"><div id="scroller2" class="scroller"><ul id="frames2"></ul></div></div><form role="form" position:"top=""><div class="form_group"><div class="row"><div id="arrayLengthButton"></div></div></div></form></div></div></div></div>'),e.join("")}},function(e,t,n){var r=n(6);e.exports=function(e){var t=[],n=e||{};return function(e,n){t.push("<li"+r.attr("id","sample_frame"+e,!0,!1)+"><img"+r.attr("src",n,!0,!1)+"/></li>")}.call(this,"i"in n?n.i:"undefined"!=typeof i?i:void 0,"url"in n?n.url:"undefined"!=typeof url?url:void 0),t.join("")}},function(e){e.exports=function(e){var t=document.createElement("style");t.type="text/css";var n=document.getElementsByTagName("head")[0];return n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),function(){n.removeChild(t)}}},function(e,t,n){"use strict";function r(e){return null!=e&&""!==e}function i(e){return(Array.isArray(e)?e.map(i):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(r).join(" ")}t.merge=function o(e,t){if(1===arguments.length){for(var n=e[0],i=1;i<e.length;i++)n=o(n,e[i]);return n}var a=e["class"],l=t["class"];(a||l)&&(a=a||[],l=l||[],Array.isArray(a)||(a=[a]),Array.isArray(l)||(l=[l]),e["class"]=a.concat(l).filter(r));for(var s in t)"class"!=s&&(e[s]=t[s]);return e},t.joinClasses=i,t.cls=function(e,n){for(var r=[],o=0;o<e.length;o++)r.push(n&&n[o]?t.escape(i([e[o]])):i(e[o]));var a=i(r);return a.length?' class="'+a+'"':""},t.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},t.attr=function(e,n,r,i){return"style"===e&&(n=t.style(n)),"boolean"==typeof n||null==n?n?" "+(i?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof n?(-1!==JSON.stringify(n).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),n&&"function"==typeof n.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(n).replace(/'/g,"&apos;")+"'"):r?(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t.escape(n)+'"'):(n&&"function"==typeof n.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+n+'"')},t.attrs=function(e,n){var r=[],o=Object.keys(e);if(o.length)for(var a=0;a<o.length;++a){var l=o[a],s=e[l];"class"==l?(s=i(s))&&r.push(" "+l+'="'+s+'"'):r.push(t.attr(l,s,!1,n))}return r.join("")},t.escape=function(e){var t=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return t===""+e?e:t},t.rethrow=function a(e,t,r,i){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||i))throw e.message+=" on line "+r,e;try{i=i||n(7).readFileSync(t,"utf8")}catch(o){a(e,null,r)}var l=3,s=i.split("\n"),c=Math.max(r-l,0),d=Math.min(s.length,r+l),l=s.slice(c,d).map(function(e,t){var n=t+c+1;return(n==r?"  > ":"    ")+n+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Jade")+":"+r+"\n"+l+"\n\n"+e.message,e}},function(){}])});